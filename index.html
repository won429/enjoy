<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì—”ìª½ì´ ë®¤ì§ í”Œë ˆì´ì–´</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { 
            font-family: 'Pretendard', sans-serif; 
            -webkit-tap-highlight-color: transparent;
            background-color: #030712;
        }
        
        /* LP íšŒì „ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes spin-lp {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .spinning {
            animation: spin-lp 10s linear infinite;
        }
        
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="text-white overflow-hidden select-none h-screen w-screen fixed">

    <!-- ë°°ê²½ ì´ë¯¸ì§€ -->
    <div class="absolute inset-0 z-0 pointer-events-none">
        <img id="bg-image" src="https://files.catbox.moe/gcuicg.jpg" class="w-full h-full object-cover opacity-30 blur-3xl scale-125 transition-opacity duration-1000">
        <div class="absolute inset-0 bg-black/40"></div>
    </div>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="relative z-10 h-full flex items-center justify-center p-4">
        <div class="bg-white/5 backdrop-blur-2xl border border-white/10 p-6 rounded-[32px] shadow-2xl w-full max-w-sm flex flex-col h-[600px]">
            
            <!-- ìƒë‹¨ë°” -->
            <div class="flex justify-between items-center mb-6">
                <div class="w-8"></div>
                <div class="flex items-center gap-2 px-3 py-1 bg-white/5 rounded-full border border-white/5">
                    <div id="status-indicator" class="w-2 h-2 rounded-full bg-white/30 transition-colors duration-300"></div>
                    <span class="text-[10px] font-bold tracking-[0.2em] text-white/80">PLAYER</span>
                </div>
                <button id="playlist-toggle" class="p-2 rounded-full text-white/50 hover:text-white hover:bg-white/10 transition-all">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>
                </button>
            </div>

            <!-- ì—ëŸ¬ ë©”ì‹œì§€ (ìˆ¨ê¹€) -->
            <div id="error-box" class="hidden bg-red-500/90 text-white text-xs p-3 rounded-xl mb-4 text-center animate-pulse">
                <p>ì¬ìƒ ì˜¤ë¥˜: <strong>music.mp3</strong> íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                <p class="mt-1 opacity-75 text-[10px]">ê°™ì€ í´ë”(GitHub)ì— mp3 íŒŒì¼ì„ ì—…ë¡œë“œí–ˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
            </div>

            <!-- 1. í”Œë ˆì´ì–´ í™”ë©´ -->
            <div id="player-view" class="flex-1 flex flex-col fade-in">
                
                <!-- ì•¨ë²” ì•„íŠ¸ ì˜ì—­ -->
                <div class="relative w-64 h-64 mx-auto mb-8 group">
                    <div id="lp-disk" class="w-full h-full rounded-full shadow-[0_10px_30px_rgba(0,0,0,0.5)] border-[6px] border-gray-900 relative bg-gray-900 overflow-hidden">
                        <!-- ì•¨ë²” ì»¤ë²„ -->
                        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-36 h-36 rounded-full overflow-hidden border-4 border-gray-800/50 z-10">
                            <img id="cover-image" src="https://files.catbox.moe/gcuicg.jpg" class="w-full h-full object-cover opacity-90">
                        </div>
                        <!-- LP ì§ˆê° -->
                        <div class="absolute inset-0 rounded-full border-[2px] border-white/5 pointer-events-none" style="clip-path: circle(45%)"></div>
                        <div class="absolute inset-0 rounded-full border-[2px] border-white/5 pointer-events-none" style="clip-path: circle(35%)"></div>
                        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white/80 rounded-full z-20"></div>
                    </div>

                    <!-- ì¤‘ì•™ ì¬ìƒ ë²„íŠ¼ (ì˜¤ë²„ë ˆì´) -->
                    <div id="play-overlay" class="absolute inset-0 flex items-center justify-center z-30 cursor-pointer transition-opacity duration-300">
                        <div class="w-16 h-16 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-white/30">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>

                <!-- ì •ë³´ -->
                <div class="text-center mb-6 px-4">
                    <h2 id="song-title" class="text-2xl font-bold text-white mb-1 truncate drop-shadow-md">ë¹›</h2>
                    <p id="song-artist" class="text-white/50 text-sm font-medium uppercase">ì—”ìª½ì´ OST Part.1</p>
                </div>

                <!-- ì§„í–‰ ë°” -->
                <div class="mb-2 px-2 w-full">
                    <div class="flex justify-between text-[10px] text-white/40 mb-2 font-mono tracking-wider">
                        <span id="current-time">00:00</span>
                        <span id="duration">00:00</span>
                    </div>
                    <div class="relative h-2 bg-white/10 rounded-full cursor-pointer group" id="progress-container">
                        <div id="progress-fill" class="absolute top-0 left-0 h-full bg-white rounded-full transition-all duration-100" style="width: 0%"></div>
                        <input type="range" id="seek-slider" min="0" max="100" value="0" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
                    </div>
                </div>
            </div>

            <!-- 2. ì¬ìƒëª©ë¡ í™”ë©´ (ìˆ¨ê¹€) -->
            <div id="playlist-view" class="hidden flex-1 overflow-y-auto mb-4 scrollbar-hide fade-in">
                <h3 class="text-white/90 text-lg font-bold mb-4 px-2">Playlist</h3>
                <div id="playlist-container" class="space-y-2"></div>
            </div>

            <!-- í•˜ë‹¨ ì»¨íŠ¸ë¡¤ëŸ¬ -->
            <div class="mt-auto pt-4 border-t border-white/5 flex justify-center items-center gap-8 pb-2">
                <button id="btn-prev" class="text-white/40 hover:text-white active:scale-90 transition-all">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg>
                </button>
                
                <button id="btn-play" class="w-16 h-16 flex items-center justify-center bg-white text-black rounded-full shadow-lg hover:scale-105 active:scale-95 transition-all">
                    <svg id="icon-play" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                    <svg id="icon-pause" class="hidden" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" stroke="none"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                </button>
                
                <button id="btn-next" class="text-white/40 hover:text-white active:scale-90 transition-all">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line></svg>
                </button>
            </div>

            <!-- ì˜¤ë””ì˜¤ íƒœê·¸ -->
            <audio id="audio" playsinline webkit-playsinline></audio>
        </div>
    </div>

    <script>
        // â— ì£¼ì˜: music.mp3 íŒŒì¼ì´ ê°™ì€ í´ë”ì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤!
        const songs = [
            {
                title: "ë¹›",
                artist: "ì—”ìª½ì´ OST Part.1",
                src: "./music.mp3", // ğŸ‘ˆ ì—¬ê¸°ë¥¼ ë°”ê¿¨ìŠµë‹ˆë‹¤. ì´ì œ GitHubì— ì˜¬ë¦° íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.
                cover: "https://files.catbox.moe/gcuicg.jpg"
            }
        ];

        let currentIdx = 0;
        let isPlaying = false;
        let isPlaylistOpen = false;

        const audio = document.getElementById('audio');
        const btnPlay = document.getElementById('btn-play');
        const overlayBtn = document.getElementById('play-overlay');
        const iconPlay = document.getElementById('icon-play');
        const iconPause = document.getElementById('icon-pause');
        const lpDisk = document.getElementById('lp-disk');
        const statusDot = document.getElementById('status-indicator');
        const progressFill = document.getElementById('progress-fill');
        const seekSlider = document.getElementById('seek-slider');
        const timeCurr = document.getElementById('current-time');
        const timeDur = document.getElementById('duration');
        const errorBox = document.getElementById('error-box');
        
        function loadSong(idx) {
            const song = songs[idx];
            audio.src = song.src;
            document.getElementById('song-title').innerText = song.title;
            document.getElementById('song-artist').innerText = song.artist;
            document.getElementById('cover-image').src = song.cover;
            document.getElementById('bg-image').src = song.cover;
            errorBox.classList.add('hidden'); // ì—ëŸ¬ ìˆ¨ê¹€
            updatePlaylist();
        }

        function togglePlay() {
            if (audio.paused) {
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        updatePlayStatus(true);
                    }).catch(e => {
                        console.error(e);
                        // íŒŒì¼ ì—†ì„ ë•Œ ì—ëŸ¬ ì²˜ë¦¬
                        errorBox.classList.remove('hidden');
                        updatePlayStatus(false);
                    });
                }
            } else {
                audio.pause();
                updatePlayStatus(false);
            }
        }

        function updatePlayStatus(playing) {
            isPlaying = playing;
            if (playing) {
                iconPlay.classList.add('hidden');
                iconPause.classList.remove('hidden');
                overlayBtn.classList.add('opacity-0', 'pointer-events-none');
                lpDisk.classList.add('spinning');
                statusDot.classList.replace('bg-white/30', 'bg-green-400');
            } else {
                iconPlay.classList.remove('hidden');
                iconPause.classList.add('hidden');
                overlayBtn.classList.remove('opacity-0', 'pointer-events-none');
                lpDisk.classList.remove('spinning');
                statusDot.classList.replace('bg-green-400', 'bg-white/30');
            }
        }

        audio.addEventListener('timeupdate', () => {
            const { currentTime, duration } = audio;
            if (isNaN(duration)) return;
            const percent = (currentTime / duration) * 100;
            progressFill.style.width = `${percent}%`;
            seekSlider.value = percent;
            timeCurr.innerText = formatTime(currentTime);
            timeDur.innerText = formatTime(duration);
        });

        seekSlider.addEventListener('input', (e) => {
            const time = (e.target.value / 100) * audio.duration;
            audio.currentTime = time;
        });

        function formatTime(s) {
            if(isNaN(s)) return "00:00";
            const min = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return `${min}:${sec < 10 ? '0'+sec : sec}`;
        }

        btnPlay.onclick = togglePlay;
        overlayBtn.onclick = togglePlay;
        document.getElementById('btn-prev').onclick = () => { currentIdx = (currentIdx - 1 + songs.length) % songs.length; loadSong(currentIdx); togglePlay(); };
        document.getElementById('btn-next').onclick = () => { currentIdx = (currentIdx + 1) % songs.length; loadSong(currentIdx); togglePlay(); };
        
        const viewPlayer = document.getElementById('player-view');
        const viewPlaylist = document.getElementById('playlist-view');
        const playlistContainer = document.getElementById('playlist-container');

        document.getElementById('playlist-toggle').onclick = () => {
            isPlaylistOpen = !isPlaylistOpen;
            if(isPlaylistOpen) {
                viewPlayer.classList.add('hidden');
                viewPlaylist.classList.remove('hidden');
            } else {
                viewPlayer.classList.remove('hidden');
                viewPlaylist.classList.add('hidden');
            }
        };

        function updatePlaylist() {
            playlistContainer.innerHTML = '';
            songs.forEach((song, i) => {
                const div = document.createElement('div');
                div.className = `flex items-center gap-3 p-3 rounded-xl cursor-pointer ${i === currentIdx ? 'bg-white/20' : 'hover:bg-white/5'}`;
                div.innerHTML = `
                    <div class="w-10 h-10 rounded-lg bg-gray-800 overflow-hidden"><img src="${song.cover}" class="w-full h-full object-cover"></div>
                    <div class="text-sm"><div class="font-bold ${i === currentIdx ? 'text-green-400' : 'text-white'}">${song.title}</div><div class="text-white/50 text-xs">${song.artist}</div></div>
                `;
                div.onclick = () => { currentIdx = i; loadSong(i); togglePlay(); document.getElementById('playlist-toggle').click(); };
                playlistContainer.appendChild(div);
            });
        }

        loadSong(0);
        audio.addEventListener('ended', () => document.getElementById('btn-next').click());
    </script>
</body>
</html>