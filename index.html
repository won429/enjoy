<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>enjoy studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- í°íŠ¸ ì¶”ê°€: í•™êµì•ˆì‹¬ ë‘¥ê·¼ë¯¸ì†Œ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonts-archive/HakgyoansimDunggeunmiso/HakgyoansimDunggeunmiso.css" type="text/css"/>
    
    <style>
        /* ê¸°ë³¸ í°íŠ¸: í”„ë¦¬í…ë‹¤ë“œ & ì• í”Œ ì‹œìŠ¤í…œ í°íŠ¸ */
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Pretendard", Roboto, "Noto Sans KR", sans-serif;
            -webkit-tap-highlight-color: transparent;
            background-color: #030712;
        }
        
        /* ë¡œê³  ì „ìš© í°íŠ¸: í•™êµì•ˆì‹¬ ë‘¥ê·¼ë¯¸ì†Œ */
        .font-logo {
            font-family: 'Hakgyoansim Dunggeunmiso', sans-serif;
            font-weight: 700; /* B(Bold) íƒ€ì… ì ìš© */
        }
        
        /* LP íšŒì „ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes spin-lp {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .spinning {
            animation: spin-lp 10s linear infinite;
        }
        
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .pb-safe { padding-bottom: env(safe-area-inset-bottom, 20px); }
        
        /* ì¬ìƒë°” íŠ¸ëœì§€ì…˜ ì œì–´ */
        .smooth-transition { transition: width 0.1s linear, left 0.1s linear; }
        .no-transition { transition: none !important; }

        /* ìŠ¬ë¼ì´ë” ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì œê±° */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            box-shadow: none;
            border: none;
        }

        /* ì¸íŠ¸ë¡œ í˜ì´ë“œ ì•„ì›ƒ ì• ë‹ˆë©”ì´ì…˜ */
        .fade-out {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.8s ease-out, visibility 0.8s;
        }
    </style>
</head>
<body class="text-white overflow-hidden select-none h-[100dvh] w-screen fixed bg-[#121212]">

    <!-- ==================== 0. ì¸íŠ¸ë¡œ í™”ë©´ ==================== -->
    <div id="boot-screen" class="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center">
        <!-- ë¡œê³  (SVG + í…ìŠ¤íŠ¸) -->
        <div class="mb-12 flex items-center gap-3 scale-125">
            <!-- ì•„ì´ì½˜ -->
            <div class="text-sky-400 flex items-center justify-center">
                <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 10v4"></path>
                    <path d="M9 7v10"></path>
                    <path d="M13 4v16"></path>
                    <path d="M17 8v8"></path>
                    <path d="M21 11v2"></path>
                </svg>
            </div>
            <!-- ë¡œê³  í…ìŠ¤íŠ¸: enjoy studio -->
            <h1 class="font-logo tracking-tight text-white text-3xl lowercase pt-1">
                enjoy studio
            </h1>
        </div>
        
        <!-- ë¡œë”© ë°” (3ì´ˆ ì„¤ì •) -->
        <div class="w-48 h-1 bg-[#333] rounded-full overflow-hidden mb-6">
            <div id="boot-progress" class="h-full bg-white w-0 rounded-full transition-all duration-[3000ms] ease-out"></div>
        </div>
        
        <!-- í„°ì¹˜ ìœ ë„ ë¬¸êµ¬ (ì‚¬íŒŒë¦¬/ëª¨ë°”ì¼ ëŒ€ì‘ìš© - í•œê¸€í™” ë° ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€) -->
        <p id="touch-hint" class="text-white/50 text-xs opacity-0 transition-opacity duration-500 font-medium tracking-widest animate-pulse">
            í™”ë©´ì„ í„°ì¹˜í•˜ë©´ ì‹œì‘ë©ë‹ˆë‹¤
        </p>
    </div>

    <!-- ==================== íŒì—… (ëª¨ë‹¬) ==================== -->
    <div id="popup-modal" class="fixed inset-0 z-[60] bg-black/70 backdrop-blur-sm hidden flex items-center justify-center px-6">
        <div class="bg-[#1E1E1E] rounded-2xl p-6 w-full max-w-xs text-center shadow-2xl border border-white/10 scale-in">
            <div class="w-12 h-12 bg-sky-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-sky-400">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
            </div>
            <h3 class="text-lg font-bold text-white mb-2">Coming Soon</h3>
            <p class="text-white/60 text-sm mb-6">ì´ ê³¡ì€ ê³§ ê³µê°œë  ì˜ˆì •ì…ë‹ˆë‹¤.<br>ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”!</p>
            <button id="popup-close" class="w-full bg-white text-black font-bold py-3 rounded-xl hover:bg-gray-200 transition-colors">
                ë‹«ê¸°
            </button>
        </div>
    </div>

    <!-- ==================== 1. í™ˆ í™”ë©´ ==================== -->
    <div id="home-screen" class="relative z-10 h-full flex flex-col opacity-0 transition-opacity duration-1000">
        
        <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="px-6 pt-8 pb-4 flex justify-between items-center bg-[#121212]">
            <!-- ë¡œê³  ì»¨í…Œì´ë„ˆ -->
            <div class="flex items-center gap-2"> 
                <!-- ì•„ì´ì½˜ -->
                <div class="text-sky-400 flex items-center justify-center">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 10v4"></path>
                        <path d="M9 7v10"></path>
                        <path d="M13 4v16"></path>
                        <path d="M17 8v8"></path>
                        <path d="M21 11v2"></path>
                    </svg>
                </div>
                <!-- ë¡œê³  í…ìŠ¤íŠ¸ -->
                <h1 class="font-logo tracking-tight text-white text-2xl lowercase pt-1">
                    enjoy studio
                </h1>
            </div>
            
            <div class="w-6"></div> <!-- ê· í˜•ì„ ìœ„í•œ ë¹ˆ ê³µê°„ -->
        </div>

        <!-- ë©”ì¸ ìŠ¤í¬ë¡¤ ì˜ì—­ -->
        <div class="flex-1 overflow-y-auto scrollbar-hide pb-32">
            
            <!-- (1) New Album ì„¹ì…˜ -->
            <div class="mb-8 pl-6">
                <p class="text-sm text-sky-400 font-bold mb-4">New Album</p>
                
                <div class="flex gap-4 overflow-x-auto scrollbar-hide pr-6">
                    <!-- ê³¡ 1: ë¹› (ì¬ìƒ ê°€ëŠ¥) -->
                    <div class="flex-shrink-0 w-40 group cursor-pointer" onclick="openPlayer(0)">
                        <div class="w-40 h-40 rounded-2xl overflow-hidden bg-gray-800 mb-3 shadow-lg relative">
                            <img src="./cover.jpg" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onerror="this.style.display='none'">
                            <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                                <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center border border-white/30">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                                </div>
                            </div>
                        </div>
                        <h3 class="text-base font-bold text-white truncate">ë¹›</h3>
                        <p class="text-xs text-gray-400 truncate font-medium">ì—”ìª½ì´ OST Part.2</p>
                        
                        <div class="mt-3 inline-flex items-center gap-2 bg-sky-500 text-white px-3 py-1.5 rounded-full font-bold text-xs hover:bg-sky-400 transition-colors shadow-lg shadow-sky-500/20">
                            <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                            Play Now
                        </div>
                    </div>
                </div>
            </div>

            <!-- (2) ì‹¤ì‹œê°„ ì°¨íŠ¸ (Top 100) -->
            <div class="px-6 mb-10">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold">ì‹¤ì‹œê°„ ì°¨íŠ¸ TOP 100</h3>
                </div>
                <div id="chart-list" class="space-y-1">
                    <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë Œë”ë§ -->
                </div>
            </div>

            <!-- (3) Coming Soon ì„¹ì…˜ -->
            <div class="pl-6 mb-8">
                <p class="text-sm text-sky-400 font-bold mb-4">Coming Soon</p>
                
                <div class="flex gap-4 overflow-x-auto scrollbar-hide pr-6" id="coming-soon-list">
                    <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë Œë”ë§ (ë¯¸ê³µê°œ ê³¡) -->
                </div>
            </div>
        </div>

        <!-- ğŸ”¥ ë¯¸ë‹ˆ í”Œë ˆì´ì–´ -->
        <div id="mini-player" class="absolute bottom-0 left-0 right-0 bg-[#1E1E1E]/95 backdrop-blur-xl border-t border-white/5 px-4 pt-3 pb-safe cursor-pointer translate-y-full transition-transform duration-300 z-20 shadow-[0_-10px_30px_rgba(0,0,0,0.3)]" onclick="openPlayer(currentIdx)">
            <div class="flex items-center justify-between mb-1">
                <div class="flex items-center gap-3">
                    <div class="w-11 h-11 rounded-lg overflow-hidden bg-gray-800 relative shadow-inner">
                        <img id="mini-cover" src="./cover.jpg" class="w-full h-full object-cover">
                    </div>
                    <div class="flex flex-col justify-center">
                        <h4 id="mini-title" class="text-sm font-bold text-white truncate max-w-[150px]">ë¹›</h4>
                        <p id="mini-artist" class="text-xs text-gray-400 truncate">ì—”ìª½ì´ OST Part.2</p>
                    </div>
                </div>
                <div class="flex items-center gap-4 pr-2">
                    <button id="mini-play-btn" class="w-9 h-9 flex items-center justify-center bg-white text-black rounded-full shadow-md active:scale-90 transition-transform" onclick="event.stopPropagation(); togglePlay();">
                        <svg id="mini-icon-play" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        <svg id="mini-icon-pause" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                    </button>
                </div>
            </div>
            <div class="absolute top-0 left-0 right-0 h-[2px] bg-white/5">
                <div id="mini-progress" class="h-full bg-sky-400 w-0 transition-all duration-300"></div>
            </div>
        </div>
    </div>


    <!-- ==================== 2. ì „ì²´ í”Œë ˆì´ì–´ í™”ë©´ ==================== -->
    <div id="player-screen" class="fixed inset-0 z-50 bg-[#0a0a0a] transform translate-y-full transition-transform duration-500 flex flex-col h-[100dvh]">
        <!-- ë°°ê²½ ë¸”ëŸ¬ -->
        <div class="absolute inset-0 z-0 opacity-40 pointer-events-none">
            <img id="player-bg-image" src="./cover.jpg" class="w-full h-full object-cover blur-3xl scale-150 brightness-75">
            <div class="absolute inset-0 bg-gradient-to-b from-[#0a0a0a] via-transparent to-[#0a0a0a]"></div>
        </div>

        <!-- ìƒë‹¨ë°” -->
        <div class="relative z-10 flex justify-between items-center p-6 pt-10">
            <button id="btn-minimize" class="p-2 rounded-full text-white/70 hover:text-white hover:bg-white/10 transition-all">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
            <span class="text-[10px] font-bold tracking-[0.2em] text-white/50">NOW PLAYING</span>
            <button class="p-2 rounded-full text-white/70 hover:text-white hover:bg-white/10 transition-all">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
            </button>
        </div>

        <!-- í”Œë ˆì´ì–´ ë©”ì¸ -->
        <div class="relative z-10 flex-1 flex flex-col items-center justify-center px-8 pb-8">
             <div id="error-box" class="hidden bg-red-500/90 text-white text-xs p-3 rounded-xl mb-8 text-center animate-pulse w-full max-w-xs">
                <p>íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                <p class="mt-1 opacity-75 text-[10px]">music.mp3 ì™€ cover.jpg í™•ì¸ í•„ìš”</p>
            </div>

            <div class="relative w-full max-w-[320px] aspect-square mb-auto mt-4 group">
                <div id="lp-disk" class="w-full h-full rounded-full shadow-[0_30px_60px_-12px_rgba(0,0,0,0.8)] border-[4px] border-[#1a1a1a] relative bg-[#111] overflow-hidden ring-1 ring-white/10">
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[60%] h-[60%] rounded-full overflow-hidden border-4 border-[#222] z-10 bg-gray-800">
                        <img id="cover-image" src="./cover.jpg" class="w-full h-full object-cover opacity-90">
                    </div>
                    <!-- LP ì§ˆê° -->
                    <div class="absolute inset-0 rounded-full border-[1px] border-white/5 pointer-events-none" style="clip-path: circle(48%)"></div>
                    <div class="absolute inset-0 rounded-full border-[1px] border-white/5 pointer-events-none" style="clip-path: circle(42%)"></div>
                    <div class="absolute inset-0 rounded-full border-[1px] border-white/5 pointer-events-none" style="clip-path: circle(36%)"></div>
                    <div class="absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none rounded-full"></div>
                </div>
            </div>

            <div class="w-full mb-8 flex items-end justify-between">
                <div class="flex-1 min-w-0 mr-4">
                    <h2 id="song-title" class="text-2xl font-bold text-white mb-1 truncate scroll-m-0 tracking-tight">ë¹›</h2>
                    <p id="song-artist" class="text-white/60 text-base font-medium truncate">ì—”ìª½ì´ OST Part.2</p>
                </div>
                <button class="text-sky-400 hover:scale-110 transition-transform p-2">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                </button>
            </div>

            <!-- ì§„í–‰ ë°” (í„°ì¹˜ ì˜ì—­ í™•ëŒ€) -->
            <div class="w-full mb-4 relative h-10 flex items-center justify-center" id="progress-container">
                <div class="absolute left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden pointer-events-none">
                    <div id="progress-fill" class="absolute top-0 left-0 h-full bg-white rounded-full smooth-transition group-hover:bg-sky-400" style="width: 0%"></div>
                </div>
                <div id="progress-handle" class="absolute h-3 w-3 bg-white rounded-full opacity-0 group-hover:opacity-100 smooth-transition pointer-events-none left-0 -ml-[6px]"></div>
                <input type="range" id="seek-slider" min="0" max="100" step="0.1" value="0" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-30" style="touch-action: none;">
            </div>
            
            <div class="w-full flex justify-between text-[10px] text-white/40 font-mono font-medium tracking-wider -mt-4">
                <span id="current-time">00:00</span>
                <span id="duration">00:00</span>
            </div>

            <!-- ì»¨íŠ¸ë¡¤ëŸ¬ -->
            <div class="mt-auto w-full flex justify-between items-center px-4 pb-safe pt-2">
                <button class="text-white/30 hover:text-white transition-colors p-2 hover:bg-white/5 rounded-full">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>
                </button>

                <div class="flex items-center gap-6">
                    <button id="btn-prev" class="text-white hover:text-sky-400 active:scale-90 transition-all p-2">
                        <svg width="36" height="36" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg>
                    </button>
                    <button id="btn-play" class="w-16 h-16 flex items-center justify-center bg-white text-black rounded-full shadow-[0_0_30px_rgba(255,255,255,0.15)] hover:scale-105 hover:bg-sky-400 hover:text-white hover:shadow-[0_0_40px_rgba(56,189,248,0.5)] active:scale-95 transition-all duration-300">
                        <svg id="icon-play" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" stroke="none" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        <svg id="icon-pause" class="hidden" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" stroke="none"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                    </button>
                    <button id="btn-next" class="text-white hover:text-sky-400 active:scale-90 transition-all p-2">
                        <svg width="36" height="36" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line></svg>
                    </button>
                </div>

                <button class="text-white/30 hover:text-white transition-colors p-2 hover:bg-white/5 rounded-full">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- ë¶€íŒ… íš¨ê³¼ìŒ ì¶”ê°€ -->
    <audio id="boot-sound" src="./boot.mp3" preload="auto"></audio>
    <!-- ë©”ì¸ ì˜¤ë””ì˜¤ íƒœê·¸ -->
    <audio id="audio" playsinline webkit-playsinline></audio>

    <script>
        // ==================== ë°ì´í„° ====================
        const songs = [
            { id: 1, title: "ë¹›", artist: "ì—”ìª½ì´ OST Part.2", src: "./music.mp3", cover: "./cover.jpg" }
        ];

        const comingSoonSongs = [
            { id: 2, title: "í˜ë‚´ë¼", artist: "ì—”ìª½ì´ OST Part.1", cover: "./cover.jpg" },
            { id: 3, title: "ëì—†ëŠ” ì—¬ë¦„ë°¤", artist: "ê·¸ë‚ , ì—”ì¡°ì´ ì´ì•¼ê¸° OST", cover: "./cover3.jpg" }
        ];

        let currentIdx = 0;
        let isPlaying = false;
        let isDragging = false; 

        const audio = document.getElementById('audio');
        const bootSound = document.getElementById('boot-sound');
        const chartList = document.getElementById('chart-list');
        const comingSoonList = document.getElementById('coming-soon-list');
        const playerScreen = document.getElementById('player-screen');
        const miniPlayer = document.getElementById('mini-player');
        const errorBox = document.getElementById('error-box');
        const bootScreen = document.getElementById('boot-screen');
        const bootProgress = document.getElementById('boot-progress');
        const homeScreen = document.getElementById('home-screen');
        const touchHint = document.getElementById('touch-hint');
        const popupModal = document.getElementById('popup-modal');
        const popupClose = document.getElementById('popup-close');
        
        const miniCover = document.getElementById('mini-cover');
        const miniTitle = document.getElementById('mini-title');
        const miniArtist = document.getElementById('mini-artist');
        const miniIconPlay = document.getElementById('mini-icon-play');
        const miniIconPause = document.getElementById('mini-icon-pause');
        const miniProgress = document.getElementById('mini-progress');
        const lpDisk = document.getElementById('lp-disk');
        const btnPlay = document.getElementById('btn-play');
        const iconPlay = document.getElementById('icon-play');
        const iconPause = document.getElementById('icon-pause');
        const progressFill = document.getElementById('progress-fill');
        const progressHandle = document.getElementById('progress-handle');
        const seekSlider = document.getElementById('seek-slider');
        const timeCurr = document.getElementById('current-time');
        const timeDur = document.getElementById('duration');
        const playerBgImage = document.getElementById('player-bg-image');

        function init() {
            setTimeout(() => {
                bootProgress.style.width = "100%";
            }, 100);

            setTimeout(tryEnterHome, 3000);

            // ë¶€íŒ…ìŒ ì—ëŸ¬ í•¸ë“¤ë§ (íŒŒì¼ ì—†ìœ¼ë©´ ë¬´ì‹œí•˜ê³  ë„˜ì–´ê°)
            bootSound.addEventListener('error', () => {
                enterHome();
            });

            renderChartList();
            renderComingSoonList();
            loadSongData(0); 
        }

        function tryEnterHome() {
            bootSound.play()
                .then(() => enterHome())
                .catch(e => {
                    // íŒŒì¼ì´ ì—†ê±°ë‚˜(error ì´ë²¤íŠ¸ë¡œ ì²˜ë¦¬ë¨) ìë™ì¬ìƒ ë§‰íŒ ê²½ìš°
                    // ì—¬ê¸°ì„œëŠ” ìë™ì¬ìƒ ë§‰íŒ ê²½ìš°ë¥¼ ì£¼ë¡œ ì²˜ë¦¬
                    console.log("Autoplay blocked or file missing:", e);
                    
                    // íŒŒì¼ì´ ì—†ì–´ì„œ ì—ëŸ¬ë‚œ ê²Œ ì•„ë‹ˆë¼ë©´(ì¦‰, ìë™ì¬ìƒ ì •ì±… ë•Œë¬¸ì´ë¼ë©´) í„°ì¹˜ ìœ ë„
                    if(bootSound.error === null) {
                        touchHint.classList.remove('opacity-0');
                        bootScreen.addEventListener('click', () => {
                            bootSound.play().catch(() => {}); // í´ë¦­í•´ë„ ì‹¤íŒ¨í•˜ë©´(íŒŒì¼ì—†ìŒ ë“±) ê·¸ëƒ¥ ì§„í–‰
                            enterHome();
                        }, { once: true });
                    } else {
                        // íŒŒì¼ì´ ì—†ì–´ì„œ ì—ëŸ¬ë‚œ ê±°ë©´ ë°”ë¡œ ì§„ì… (ìœ„ì˜ error ì´ë²¤íŠ¸ê°€ ì²˜ë¦¬í•˜ê² ì§€ë§Œ ì•ˆì „ì¥ì¹˜)
                        enterHome();
                    }
                });
        }

        function enterHome() {
            bootScreen.classList.add('fade-out');
            homeScreen.classList.remove('opacity-0');
        }

        function showPopup() {
            popupModal.classList.remove('hidden');
        }
        
        popupClose.onclick = () => popupModal.classList.add('hidden');
        popupModal.onclick = (e) => { if (e.target === popupModal) popupModal.classList.add('hidden'); }

        function renderChartList() {
            chartList.innerHTML = '';
            const song = songs[0]; 
            const rank = 1;
            const div = document.createElement('div');
            div.className = "flex items-center gap-4 p-3 rounded-xl hover:bg-white/5 active:scale-98 transition-all cursor-pointer group";
            div.innerHTML = `
                <div class="w-6 text-center text-sky-400 text-lg font-bold font-logo">${rank}</div>
                <div class="w-12 h-12 rounded-lg bg-gray-800 overflow-hidden relative flex-shrink-0">
                    <img src="${song.cover}" class="w-full h-full object-cover" onerror="this.style.opacity='0.5'">
                </div>
                <div class="flex-1 min-w-0">
                    <h3 class="text-base font-medium text-white truncate">${song.title}</h3>
                    <p class="text-xs text-gray-400 truncate">${song.artist}</p>
                </div>
                <button class="text-gray-600 hover:text-white">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
                </button>
            `;
            div.onclick = () => openPlayer(0);
            chartList.appendChild(div);
        }

        function renderComingSoonList() {
            comingSoonList.innerHTML = '';
            comingSoonSongs.forEach((song) => {
                const div = document.createElement('div');
                div.className = "flex-shrink-0 w-32 group cursor-pointer";
                div.innerHTML = `
                    <div class="w-32 h-32 rounded-xl overflow-hidden bg-gray-800 mb-2 shadow-lg relative">
                        <img src="${song.cover}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onerror="this.style.display='none'">
                        <div class="absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                            <div class="w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                            </div>
                        </div>
                    </div>
                    <h3 class="text-sm font-bold text-white truncate">${song.title}</h3>
                    <p class="text-[10px] text-gray-400 truncate font-medium">${song.artist}</p>
                `;
                div.onclick = () => showPopup();
                comingSoonList.appendChild(div);
            });
        }

        function loadSongData(index) {
            const song = songs[index];
            audio.src = song.src;
            document.getElementById('song-title').innerText = song.title;
            document.getElementById('song-artist').innerText = song.artist;
            document.getElementById('cover-image').src = song.cover;
            playerBgImage.src = song.cover;
            miniTitle.innerText = song.title;
            miniArtist.innerText = song.artist;
            miniCover.src = song.cover;
            errorBox.classList.add('hidden');
        }

        function openPlayer(index) {
            if (currentIdx === index) {
                playerScreen.classList.remove('translate-y-full');
                return;
            }
            currentIdx = index;
            loadSongData(index);
            playerScreen.classList.remove('translate-y-full');
            miniPlayer.classList.remove('translate-y-full');
            setTimeout(() => playMusic(), 300);
        }

        document.getElementById('btn-minimize').onclick = () => {
            playerScreen.classList.add('translate-y-full');
            miniPlayer.classList.remove('translate-y-full');
        };

        function playMusic() {
            const playPromise = audio.play();
            if (playPromise !== undefined) {
                playPromise.then(() => updateUI(true)).catch(e => {
                    console.error(e);
                    errorBox.classList.remove('hidden');
                    updateUI(false);
                });
            }
        }

        function pauseMusic() {
            audio.pause();
            updateUI(false);
        }

        function togglePlay() {
            if (audio.paused) playMusic(); else pauseMusic();
        }

        function updateUI(playing) {
            isPlaying = playing;
            if (playing) {
                iconPlay.classList.add('hidden'); iconPause.classList.remove('hidden');
                miniIconPlay.classList.add('hidden'); miniIconPause.classList.remove('hidden');
                lpDisk.classList.add('spinning');
            } else {
                iconPlay.classList.remove('hidden'); iconPause.classList.add('hidden');
                miniIconPlay.classList.remove('hidden'); miniIconPause.classList.add('hidden');
                lpDisk.classList.remove('spinning');
            }
        }

        function playNext() {
            currentIdx = (currentIdx + 1) % songs.length;
            loadSongData(currentIdx);
            playMusic();
        }
        
        function playPrev() {
            currentIdx = (currentIdx - 1 + songs.length) % songs.length;
            loadSongData(currentIdx);
            playMusic();
        }

        btnPlay.onclick = togglePlay;
        document.getElementById('btn-next').onclick = playNext;
        document.getElementById('btn-prev').onclick = playPrev;
        audio.addEventListener('ended', playNext);

        // ==================== CUSTOM TOUCH SCRUBBER ====================
        function getClientX(e) {
            return e.touches ? e.touches[0].clientX : e.clientX;
        }

        function updateProgressVisuals(percent) {
            progressFill.style.width = `${percent}%`;
            progressHandle.style.left = `${percent}%`;
            if (audio.duration) {
                timeCurr.innerText = formatTime((percent / 100) * audio.duration);
            }
        }

        function onScrub(e) {
            const rect = progressContainer.getBoundingClientRect();
            const clientX = getClientX(e);
            let percent = ((clientX - rect.left) / rect.width) * 100;
            percent = Math.max(0, Math.min(100, percent));
            return percent;
        }

        function startScrub(e) {
            isDragging = true;
            const percent = onScrub(e);
            updateProgressVisuals(percent);
            progressFill.classList.remove('smooth-transition'); 
            progressFill.classList.add('no-transition');
            e.preventDefault(); 
        }

        function moveScrub(e) {
            if (!isDragging) return;
            const percent = onScrub(e);
            updateProgressVisuals(percent);
            e.preventDefault();
        }

        function endScrub(e) {
            if (!isDragging) return;
            isDragging = false;
            
            const percentStr = progressFill.style.width; 
            const percent = parseFloat(percentStr) || 0;
            
            if(audio.duration) {
                audio.currentTime = (percent / 100) * audio.duration;
            }

            progressFill.classList.remove('no-transition');
            progressFill.classList.add('smooth-transition');
        }

        // ì´ë²¤íŠ¸ ë“±ë¡
        progressContainer.addEventListener('mousedown', startScrub);
        progressContainer.addEventListener('touchstart', startScrub);

        document.addEventListener('mousemove', moveScrub);
        document.addEventListener('touchmove', moveScrub, { passive: false });

        document.addEventListener('mouseup', endScrub);
        document.addEventListener('touchend', endScrub);


        // ìë™ ì—…ë°ì´íŠ¸ (ë“œë˜ê·¸ ì¤‘ ì•„ë‹ ë•Œë§Œ)
        audio.addEventListener('timeupdate', () => {
            if (!isDragging) {
                const { currentTime, duration } = audio;
                if (isNaN(duration)) return;
                const percent = (currentTime / duration) * 100;
                
                progressFill.style.width = `${percent}%`;
                progressHandle.style.left = `${percent}%`;
                miniProgress.style.width = `${percent}%`;
                
                timeCurr.innerText = formatTime(currentTime);
                timeDur.innerText = formatTime(duration);
            }
        });

        function formatTime(s) {
            if(isNaN(s)) return "00:00";
            const min = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return `${min}:${sec < 10 ? '0'+sec : sec}`;
        }

        init();
    </script>
</body>
</html>